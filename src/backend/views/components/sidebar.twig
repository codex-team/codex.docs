
{% set mainClass = 'docs-sidebar' %}

<div data-module="sidebar" class="{{mainClass}}__wrapper">

  <div class="docs-sidebar__toggler">
    {{ svg('menu') }} Table of contents
  </div>

  <aside class="{{mainClass}}">
    {% for firstLevelPage in menu %}
      <section class="docs-sidebar__section" data-id="{{firstLevelPage._id}}">
        <a
          class="docs-sidebar__section-title {{page is defined and page._id == firstLevelPage._id ? 'docs-sidebar__section-title--active' : ''}}"
          href="{{firstLevelPage.uri ? '/' ~ firstLevelPage.uri : '/page/' ~ firstLevelPage._id }}"
        >
          <span>
            {{ firstLevelPage.title | striptags }}
          </span>
          {% if firstLevelPage.children is not empty %}
            <button class="docs-sidebar__section-toggler">
              {{ svg('arrow-up') }}
            </button>
          {% endif %}
        </a>
        {% if firstLevelPage.children is not empty %}
          <ul class="docs-sidebar__section-list">
            {% for child in firstLevelPage.children %}
              <li class="docs-sidebar__section-list-item-wrapper">
                <a
                  class="docs-sidebar__section-list-item {{page is defined and page._id == child._id ? 'docs-sidebar__section-list-item--active' : ''}}"
                  href="{{ child.uri ? '/' ~ child.uri : '/page/' ~ child._id }}">
                    <span> {{ child.title | striptags }} </span>
                </a>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </section>
    {% endfor %}
  </aside>
</div>

{% extends 'layout.twig' %}

{% block body %}
  <style>
    .docs-header__button {
      visibility: hidden;
    }
  </style>
  <section data-module="writing">
    <textarea name="module-settings" hidden>
      {
        "page": {{ page | json_encode | escape }}
      }
    </textarea>
    <header class="writing-header">
      <div class="writing-header__left">
        {% set currentPageId = 0 %}
        {% if page is not empty %}
          {% set currentPageId = page._id %}
        {% endif %}
        <div class="select-wrapper">
          <label for="parent">New Page at the</label>
          <select id="parent" name="parent">
            <option value="0">Root</option>
            {% for _page in pagesAvailable %}
              {% if _page._id != currentPageId %}
                <option value="{{ _page._id }}" {{ page is not empty and page._parent == _page._id ? 'selected' : ''}}>
                  {% if _page._parent != "0" %}
                    &nbsp;
                    &nbsp;
                  {% endif %}
                  {{ _page.title }}
                </option>
              {% endif %}
            {% endfor %}
          </select>
        </div>
        {% if parentsChildrenOrdered is not empty %}
          <div class="select-wrapper">
            <label for="above">Put Above</label>
            <select id="above" name="above">
              <option value="0">â€”</option>
              {% for _page in parentsChildrenOrdered %}
                <option value="{{ _page._id }}">{{ _page.title }}</option>
              {% endfor %}
            </select>
          </div>
        {% endif %}
        {% if page is not empty %}
          <div class="uri-input-wrapper">
            <label for="uri-input">Alias</label>
            <input type="text" id="uri-input" class="uri-input" name="uri-input" placeholder="URI (Optional)" value="{{ page.uri }}">
          </div>
        {% endif %}
      </div>
    </header>
    <div class="writing-editor">
      <div id="editorjs"></div>
    </div>
    <div class="writing-buttons">
      <span class="writing-header__save" name="js-submit-save">Save</span>

      {% if page._id is not empty %}
        <span class="writing-buttons__remove" name="js-submit-remove">Remove</span>
      {% endif %}
    </div>
  </section>
{% endblock %}
